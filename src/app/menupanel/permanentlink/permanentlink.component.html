<!-- Main button to trigger anonymous or user dialog -->
<button class="cesium-button cesium-toolbar-button editor-toggle-button" (click)="permanentLinkClick()">
  <i class="fa fa-link" title="Create Permanent Link"></i>
</button>
<!-- Anonymous user dialog -->
@if (!user && bShowDialog) {
  <div class="editor-box hasEvent">
    <a id="PermanentLinkAnonymous" class="popup" (click)="generateAnonymousPermanentLink()"><i class="fa fa-link" style="color:white;"></i><span title="Create a link preserving current map layers" style="color:white;">&nbsp;&nbsp;Permanent Link</span>
    <div class="popuptext container-fluid" [ngClass]="{'show':bShowDialog}" style="z-index: 10;">
      <div class="row ml-3 mb-3">
        <div class="input-group ">
          <div class="input-group-prepend">
            <button for="permanentlink-text-copy" class="btn btn-danger" ngxClipboard [cbContent]="permanentlink" type="button">
              <i class="far fa-copy"></i>
            </button>
          </div>
          <div appStopPropagation>
            <input type="text" readonly class="form-control" id="permanentlink-text-copy" [(ngModel)]=permanentlink>
          </div>
        </div>
      </div>
      <div class="row ml-3">
        @if (shorteningMode) {
          <div class="small" style="color:white;">URL shortening in progress ...</div>
        }
      </div>
    </div>
  </a>
</div>
}